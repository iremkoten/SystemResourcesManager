SET (PROJECT_NAME VmsSystemResourceManager)

FIND_PACKAGE(Qt5 COMPONENTS Core Gui Widgets REQUIRED)

INCLUDE_DIRECTORIES(
		${VMS_UTILS_BASE_SRC_DIR}
		${VMS_UTILS_DESIGN_PATTERNS_SRC_DIR}
		${VMS_UTILS_COTS_BOOST_SRC_DIR}
		${VMS_UTILS_COTS_SIGAR_SRC_DIR}
		${CMAKE_BINARY_DIR}/src/VmsSystemResourceManager)
		
LINK_DIRECTORIES(
		${VMS_UTILS_COTS_BOOST_LIB_DIR}
		${VMS_UTILS_BASE_LIB_DIR}
		${VMS_UTILS_COTS_SIGAR_LIB_DIR}
		${VMS_UTILS_DESIGN_PATTERNS_LIB_DIR}
		)

SET(VMS_SYSTEM_RESOURCE_WIDGET_HEADER 
		VmsSystemResourceManager.h
		VmsSystemResourceManagerExportImport.h
		VmsSystemResourceWidget.h
		)

SET(VMS_SYSTEM_RESOURCE_WIDGET_SOURCE
		VmsSystemResourceManager.cpp
		VmsSystemResourceWidget.cpp
		)

SET(VMS_SYSTEM_RESOURCE_WIDGET_UI
		VmsSystemResourceWidget.ui
		)


QT5_WRAP_UI(UISrcs ${VMS_SYSTEM_RESOURCE_WIDGET_UI})
QT5_WRAP_CPP(MOCSrcs ${VMS_SYSTEM_RESOURCE_WIDGET_HEADER})
QT5_ADD_RESOURCES(QRCRsc ${VMS_SYSTEM_RESOURCE_WIDGET_QRC})
	

ADD_LIBRARY(${PROJECT_NAME} SHARED
		${MOCSrcs}
		${VMS_SYSTEM_RESOURCE_WIDGET_HEADER}
		${VMS_SYSTEM_RESOURCE_WIDGET_SOURCE}
		${VMS_SYSTEM_RESOURCE_WIDGET_UI}
		${VMS_SYSTEM_RESOURCE_WIDGET_QRC})	

SOURCE_GROUP(Form FILES
		${VMS_SYSTEM_RESOURCE_WIDGET_UI})
		
SOURCE_GROUP(Generated FILES 
		${MOCSrcs}
		${UISrcs}
		${QRCRsc})
			
ADD_DEFINITIONS(-DVMS_SYSTEM_RESOURCE_MANAGER_EXPORTS)

set_property(TARGET ${PROJECT_NAME}  APPEND PROPERTY LINK_FLAGS  /NODEFAULTLIB:libcmt)
TARGET_LINK_LIBRARIES(${PROJECT_NAME} PRIVATE
	VmsBase
	VmsDesignPatterns
	${VMS_UTILS_COTS_SIGAR_LIB}
	${QT_LIBRARIES})
